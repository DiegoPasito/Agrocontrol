<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agrocontrol</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/Jersey.css">

</head>
<body>
 <header>

 <nav class="navbar navbar-expand-lg ">
  <div class="container-fluid ">

    <a class="navbar-brand" >
      <img src="img/Logo agrocontrol.png" alt="Bootstrap" width="100" height="100">
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">

         <li class="nav-item">
          <a class="nav-link" href="contenidoPrincipal.html" > Inicio </a>
        </li>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Vacas
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="Jersey.html">Jersey</a></li>
            <li><hr class="dropdown-divider" ></li>
            <li><a class="dropdown-item" href="Girolando.html">Girolando</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="Gyr.html">Gyr</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="simmental.html">Simmental</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" >Medicamentos</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="Medicamento Jersey.html">Jersey</a></li>
            <li><hr class="dropdown-divider" ></li>
            <li><a class="dropdown-item" href="Medicamento Girolando.html">Girolando</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="Medicamento Gyr.html">Gyr</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="Medicamento Simmental.html">Simmental</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Insumos</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="enfermedades.html">Enfermedades</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="Alertas y recordatorios.html" > Alertas y Recordatorios </a>
        </li>

         <li class="nav-item">
          <a class="nav-link" href="control.html" > Control </a>
        </li>
 
        <li class="nav-item">
          <a class="nav-link" href="index.html" > Usuario </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="Perfilusuario.html" > Perfil </a>
        </li>
      </ul>
      <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Buscar" aria-label="Search"/>
        <button class="btn btn-outline-success" type="submit">Buscar</button> 
      </form> <br>
    </div>
  </div>
 </nav>
  </header>

   <main class="container mt-4">
    < <div class="text-center mb-5">
    <h2 style="color:#207729; font-weight:700;">üêÑ Perfil de la Vaca Jersey</h2>
    <p style="color:#2d7a35;">Una raza lechera peque√±a pero de gran coraz√≥n üíö</p>
    <hr style="width:60%; margin:auto; border:2px solid #36ac42;">
  </div>

  <!-- Secci√≥n principal -->
  <div class="card shadow-lg border-0 mb-4" style="border-radius:20px; background:linear-gradient(145deg, #a9eeb0, #a1e2a8);">
    <div class="row g-0 align-items-center">
      <div class="col-md-5">
        <img src="img/Jersey Imagen 2.webp" class="img-fluid rounded-start" alt="Vaca Jersey" style="border-radius:20px 0 0 20px;">
      </div>
      <div class="col-md-7">
        <div class="card-body">
          <h4 class="card-title fw-bold" style="color:#207729;">Raza Jersey</h4>
          <p class="card-text">
            <strong>Descripci√≥n:</strong> Originaria de la Isla de Jersey (entre Inglaterra y Francia).  
            Es una vaca de tama√±o mediano, color marr√≥n claro a oscuro y ojos grandes.  
            Produce leche rica en <strong>grasa (4.8‚Äì6%)</strong> y <strong>prote√≠na (3.6‚Äì4%)</strong>, ideal para mantequilla y quesos artesanales.
          </p>
          <ul class="list-unstyled">
            <li><strong>Uso principal:</strong> Producci√≥n lechera de alta calidad ü•õ</li>
            <li><strong>Tama√±o promedio:</strong> 350‚Äì450 kg</li>
            <li><strong>Color:</strong> Marr√≥n claro con tonos dorados</li>
            <li><strong>Producci√≥n:</strong> 4.000‚Äì6.000 L/lactancia</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Alimentaci√≥n -->
  <div class="card shadow-sm border-0 mb-4" style="background-color:#a9eeb0; border-left:6px solid #36ac42; border-radius:15px;">
    <div class="card-body">
      <h5 style="color:#207729;">üå± Alimentaci√≥n b√°sica</h5>
      <p>Una dieta equilibrada garantiza buena producci√≥n y salud:</p>
      <ul>
        <li><strong>Forraje:</strong> kikuyo, ryegrass, brachiaria, alfalfa, ensilaje de ma√≠z.</li>
        <li><strong>Concentrados:</strong> ma√≠z, sorgo, cebada, soya, afrecho de trigo.</li>
        <li><strong>Suplementos:</strong> calcio, f√≥sforo, potasio, vitaminas A, D y E.</li>
        <li><strong>Agua:</strong> entre 50‚Äì80 L diarios por vaca.</li>
      </ul>
    </div>
  </div>

  <!-- Suplementos -->
  <div class="card shadow-sm border-0 mb-4" style="background-color:#a9eeb0; border-left:6px solid #36ac42; border-radius:15px;">
    <div class="card-body">
      <h5 style="color:#207729;">üß™ Suplementos </h5>
      <ul>
        <li><strong>Preparto:</strong> Calcio y f√≥sforo.</li>
        <li><strong>Postparto:</strong> Propilenglicol para evitar cetosis.</li>
        <li><strong>Producci√≥n:</strong> Grasas protegidas y prote√≠nas balanceadas.</li>
      </ul>
    </div>
  </div>

  <!-- Sanitario -->
  <div class="card shadow-sm border-0 mb-4"
    style="background-color:#a9eeb0; border-left:6px solid #36ac42; border-radius:15px;">
    <div class="card-body">
      <h5 style="color:#207729;">üöë Manejo sanitario</h5>
      <ul>
        <li><strong>Vacunas:</strong> Aftosa, brucelosis, clostridiosis, IBR, BVD, leptospira.</li>
        <li><strong>Antiparasitarios:</strong> Internos (albendazol, ivermectina) y externos (amitraz, cipermetrina).</li>
        <li><strong>Cuidados especiales:</strong> Control de cojeras y problemas articulares por su tama√±o.</li>
      </ul>
    </div>
  </div>

  <!-- Reproducci√≥n -->
  <div class="card shadow-sm border-0 mb-4" style="background-color:#a9eeb0; border-left:6px solid #36ac42; border-radius:15px;">
    <div class="card-body">
      <h5 style="color:#207729;">üë∂ Reproducci√≥n</h5>
      <ul>
        <li><strong>Edad al primer parto:</strong> 22‚Äì24 meses.</li>
        <li><strong>Intervalo entre partos:</strong> 12‚Äì13 meses.</li>
        <li><strong>M√©todo:</strong> monta natural o inseminaci√≥n artificial.</li>
        <li><strong>Ventaja:</strong> partos f√°ciles gracias al tama√±o peque√±o del ternero.</li>
      </ul>
    </div>
  </div>

  <!-- Ventajas y desventajas -->
  <div class="card shadow-sm border-0 mb-5" style="background-color:#a9eeb0; border-left:6px solid #36ac42; border-radius:15px;">
    <div class="card-body">
      <h5 style="color:#207729;">üìä Ventajas y desventajas</h5>
      <div class="row">
        <div class="col-md-6">
          <p class="fw-bold">Ventajas üåü</p>
          <ul>
            <li>Leche con alto contenido de grasa y prote√≠na.</li>
            <li>Excelente adaptaci√≥n al clima c√°lido.</li>
            <li>Alta fertilidad y longevidad.</li>
            <li>F√°cil de manejar en peque√±as fincas.</li>
          </ul>
        </div>
        <div class="col-md-6">
          <p class="fw-bold">Desventajas ‚ö†Ô∏è</p>
          <ul>
            <li>Menor volumen de leche que la Holstein.</li>
            <li>Temperamento sensible o nervioso.</li>
            <li>Menor valor comercial para carne.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="text-center">
    <small style="color:#207729;">Actualizado: octubre de 2025 üïì</small>
  </div>
</main>
  <h2>Mis Vacas Jersey</h2>
  <div id="tabla-jersey"></div>
</main>

<!-- Modal Editar -->
<div class="modal fade" id="editarModal" tabindex="-1" aria-labelledby="editarLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editarLabel">Editar Vaca</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="formEditar">
          <input type="hidden" id="edit-id">
          <div class="mb-3">
            <label class="form-label">Nombre</label>
            <input type="text" class="form-control" id="edit-nombre" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Peso (kg)</label>
            <input type="number" class="form-control" id="edit-peso" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Edad (a√±os)</label>
            <input type="number" class="form-control" id="edit-edad" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Lactando</label>
            <select class="form-select" id="edit-lactando">
              <option value="true">S√≠</option>
              <option value="false">No</option>
            </select>
          </div>
          <button type="submit" class="btn btn-success">Guardar cambios</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Modal Eliminar -->
<div class="modal fade" id="eliminarModal" tabindex="-1" aria-labelledby="eliminarLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="eliminarLabel">Eliminar Vaca</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>¬øSeguro que deseas eliminar la vaca <strong id="nombreEliminar"></strong>?</p>
        <input type="hidden" id="delete-id">
        <button id="btnConfirmEliminar" class="btn btn-danger">S√≠, eliminar</button>
      </div>
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
import { 
  getFirestore, collection, getDocs, doc, deleteDoc, updateDoc 
} from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyB7WdEEYxvxYDe1bsrcLg1lQNa1wJbBXZ8",
  authDomain: "agrocontrol-8550b.firebaseapp.com",
  projectId: "agrocontrol-8550b",
  storageBucket: "agrocontrol-8550b.appspot.com",
  messagingSenderId: "540741735209",
  appId: "1:540741735209:web:7a44dff52d07641cc91d38",
  measurementId: "G-7FBMJ1WNPZ"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

let usuarioId = null;

// Render tabla
function crearTabla(vacas) {
  if (vacas.length === 0) return "<p>No hay vacas Jersey registradas.</p>";

  let filas = vacas.map(v => `
    <tr>
      <td>${v.data.nombre}</td>
      <td>${v.data.peso} kg</td>
      <td>${v.data.edad} a√±os</td>
      <td>${v.data.lactando ? "S√≠" : "No"}</td>
      <td>
        <button class="btn btn-warning btn-sm" 
          data-bs-toggle="modal" data-bs-target="#editarModal"
          onclick="llenarFormulario('${v.id}','${v.data.nombre}','${v.data.peso}','${v.data.edad}','${v.data.lactando}')">Editar</button>
        <button class="btn btn-danger btn-sm"
          data-bs-toggle="modal" data-bs-target="#eliminarModal"
          onclick="prepararEliminar('${v.id}','${v.data.nombre}')">Eliminar</button>
      </td>
    </tr>
  `).join("");

  return `
    <table class="table table-striped table-hover shadow rounded">
      <thead class="table-dark">
        <tr>
          <th>Nombre</th>
          <th>Peso</th>
          <th>Edad</th>
          <th>Lactando</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>${filas}</tbody>
    </table>
  `;
}

// Cargar vacas
async function cargarVacas(userId) {
  const querySnap = await getDocs(collection(db, "usuarios", userId, "Jersey"));
  const vacas = querySnap.docs.map(docSnap => ({ id: docSnap.id, data: docSnap.data() }));
  document.getElementById("tabla-jersey").innerHTML = crearTabla(vacas);
}

// Pasar datos al modal de edici√≥n
window.llenarFormulario = function(id, nombre, peso, edad, lactando) {
  document.getElementById("edit-id").value = id;
  document.getElementById("edit-nombre").value = nombre;
  document.getElementById("edit-peso").value = peso;
  document.getElementById("edit-edad").value = edad;
  document.getElementById("edit-lactando").value = lactando;
};

// Guardar cambios de edici√≥n
document.getElementById("formEditar").addEventListener("submit", async (e) => {
  e.preventDefault();
  const id = document.getElementById("edit-id").value;
  const nombre = document.getElementById("edit-nombre").value;
  const peso = parseFloat(document.getElementById("edit-peso").value);
  const edad = parseInt(document.getElementById("edit-edad").value);
  const lactando = document.getElementById("edit-lactando").value === "true";

  await updateDoc(doc(db, "usuarios", usuarioId, "Jersey", id), {
    nombre, peso, edad, lactando
  });

  bootstrap.Modal.getInstance(document.getElementById("editarModal")).hide();
  cargarVacas(usuarioId);
});

// Pasar datos al modal de eliminaci√≥n
window.prepararEliminar = function(id, nombre) {
  document.getElementById("delete-id").value = id;
  document.getElementById("nombreEliminar").innerText = nombre;
};

// Confirmar eliminaci√≥n
document.getElementById("btnConfirmEliminar").addEventListener("click", async () => {
  const id = document.getElementById("delete-id").value;
  await deleteDoc(doc(db, "usuarios", usuarioId, "Jersey", id));
  bootstrap.Modal.getInstance(document.getElementById("eliminarModal")).hide();
  cargarVacas(usuarioId);
});

onAuthStateChanged(auth, (user) => {
  if (user) {
    usuarioId = user.uid;
    cargarVacas(usuarioId);
  } else {
    document.getElementById("tabla-jersey").innerHTML = "<p>Debes iniciar sesi√≥n para ver tus vacas.</p>";
  }
});
</script>



</body>
</html>