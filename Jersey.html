<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agrocontrol</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="css/Jersey.css">

</head>
<body>
 <header>
    <nav class="navbar navbar-expand-lg  fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand">
          <img src="img/Logo agrocontrol.png" alt="Logo Agrocontrol" width="100" height="100" onerror="this.style.display='none'">
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="contenidoPrincipal.html">Inicio</a>
            </li>

            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Vacas
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="Jersey.html">Jersey</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="Girolando.html">Girolando</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="Gyr.html">Gyr</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="simmental.html">Simmental</a></li>
              </ul>
            </li>

            <li class="nav-item">
          <a class="nav-link" href="Medicamentos.html">Medicamentos</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="insumos.html">Insumos</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="enfermedades.html">Enfermedades</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="Alertas y recordatorios.html">Alertas y Recordatorios</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="control.html">Control</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="Costos.html">Costos</a>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="Perfilusuario.html">Perfil</a>
            </li>
          </ul>

          
        </div>
      </div>
    </nav>
  </header>

  <main class="container mt-4">
    <div class="text-center mb-5">
      <h2 class="page-title">üêÑ Perfil de la Vaca Jersey</h2>
      <p class="page-subtitle">Una raza lechera peque√±a pero de gran coraz√≥n üíö</p>
      <hr class="decorative">
    </div>

    <!-- Secci√≥n principal -->
    <div class="card shadow-lg mb-4">
      <div class="row g-0 align-items-center  w-100 m-0">
        <div class="col-md-5">
          <img src="img/Jersey Imagen 2.webp" class="img-fluid rounded-start" alt="Vaca Jersey" style="border-radius:20px 0 0 20px;" onerror="this.style.display='none'">
        </div>
        <div class="col-md-7">
          <div class="card-body">
            <h4 class="card-title fw-bold section-title">Raza Jersey</h4>
            <p class="card-text">
              <strong>Descripci√≥n:</strong> Originaria de la Isla de Jersey (entre Inglaterra y Francia).  
              Es una vaca de tama√±o mediano, color marr√≥n claro a oscuro y ojos grandes.  
              Produce leche rica en <strong>grasa (4.8‚Äì6%)</strong> y <strong>prote√≠na (3.6‚Äì4%)</strong>, ideal para mantequilla y quesos artesanales.
            </p>
            <ul class="list-unstyled">
              <li><strong>Uso principal:</strong> Producci√≥n lechera de alta calidad ü•õ</li>
              <li><strong>Tama√±o promedio:</strong> 350‚Äì450 kg</li>
              <li><strong>Color:</strong> Marr√≥n claro con tonos dorados</li>
              <li><strong>Producci√≥n:</strong> 4.000‚Äì6.000 L/lactancia</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Alimentaci√≥n -->
    <div class="card shadow-sm border-left-accent mb-4">
      <div class="card-body">
        <h5 class="section-title">üå± Alimentaci√≥n b√°sica</h5>
        <p>Una dieta equilibrada garantiza buena producci√≥n y salud:</p>
        <ul>
          <li><strong>Forraje:</strong> kikuyo, ryegrass, brachiaria, alfalfa, ensilaje de ma√≠z.</li>
          <li><strong>Concentrados:</strong> ma√≠z, sorgo, cebada, soya, afrecho de trigo.</li>
          <li><strong>Suplementos:</strong> calcio, f√≥sforo, potasio, vitaminas A, D y E.</li>
          <li><strong>Agua:</strong> entre 50‚Äì80 L diarios por vaca.</li>
        </ul>
      </div>
    </div>

    <!-- Suplementos -->
    <div class="card shadow-sm border-left-accent mb-4">
      <div class="card-body">
        <h5 class="section-title">üß™ Suplementos</h5>
        <ul>
          <li><strong>Preparto:</strong> Calcio y f√≥sforo.</li>
          <li><strong>Postparto:</strong> Propilenglicol para evitar cetosis.</li>
          <li><strong>Producci√≥n:</strong> Grasas protegidas y prote√≠nas balanceadas.</li>
        </ul>
      </div>
    </div>

    <!-- Sanitario -->
    <div class="card shadow-sm border-left-accent mb-4">
      <div class="card-body">
        <h5 class="section-title">üöë Manejo sanitario</h5>
        <ul>
          <li><strong>Vacunas:</strong> Aftosa, brucelosis, clostridiosis, IBR, BVD, leptospira.</li>
          <li><strong>Antiparasitarios:</strong> Internos (albendazol, ivermectina) y externos (amitraz, cipermetrina).</li>
          <li><strong>Cuidados especiales:</strong> Control de cojeras y problemas articulares por su tama√±o.</li>
        </ul>
      </div>
    </div>

    <!-- Reproducci√≥n -->
    <div class="card shadow-sm border-left-accent mb-4">
      <div class="card-body">
        <h5 class="section-title">üë∂ Reproducci√≥n</h5>
        <ul>
          <li><strong>Edad al primer parto:</strong> 22‚Äì24 meses.</li>
          <li><strong>Intervalo entre partos:</strong> 12‚Äì13 meses.</li>
          <li><strong>M√©todo:</strong> monta natural o inseminaci√≥n artificial.</li>
          <li><strong>Ventaja:</strong> partos f√°ciles gracias al tama√±o peque√±o del ternero.</li>
        </ul>
      </div>
    </div>

    <!-- Ventajas y desventajas -->
    <div class="card shadow-sm border-left-accent mb-5">
      <div class="card-body">
        <h5 class="section-title">üìä Ventajas y desventajas</h5>
        <div class="row">
          <div class="col-md-6">
            <p class="fw-bold">Ventajas üåü</p>
            <ul>
              <li>Leche con alto contenido de grasa y prote√≠na.</li>
              <li>Excelente adaptaci√≥n al clima c√°lido.</li>
              <li>Alta fertilidad y longevidad.</li>
              <li>F√°cil de manejar en peque√±as fincas.</li>
            </ul>
          </div>
          <div class="col-md-6">
            <p class="fw-bold">Desventajas ‚ö†Ô∏è</p>
            <ul>
              <li>Menor volumen de leche que la Holstein.</li>
              <li>Temperamento sensible o nervioso.</li>
              <li>Menor valor comercial para carne.</li>
            </ul>
          </div>
        </div>
      </div>
    </div>


    <h2 class="mb-4 text-center page-title">üêÑ Mis Vacas Jersey</h2>
    <div id="tabla-jersey" class="table-responsive" ></div>
  </main>

  <!-- Modal Editar -->
  <div class="modal fade" id="editarModal" tabindex="-1" aria-labelledby="editarLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header modal-header-verde">
          <h5 class="modal-title" id="editarLabel">Editar Vaca</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form id="formEditar">
            <input type="hidden" id="edit-id">

            <div class="mb-3">
              <label class="form-label">Nombre</label>
              <input type="text" class="form-control" id="edit-nombre" required>
            </div>

            <div class="mb-3">
              <label class="form-label">Peso (kg)</label>
              <input type="number" class="form-control" id="edit-peso" step="any" required>
            </div>

            <div class="mb-3">
              <label class="form-label">Edad (a√±os)</label>
              <input type="number" class="form-control" id="edit-edad" required>
            </div>

            <div class="mb-3">
              <label class="form-label">Producci√≥n de leche (L/d√≠a)</label>
              <input type="number" class="form-control" id="edit-leche" step="any" required>
            </div>

            <div class="mb-3">
              <label class="form-label">Lactando</label>
              <select class="form-select" id="edit-lactando">
                <option value="true">S√≠</option>
                <option value="false">No</option>
              </select>
            </div>

            <button type="submit" class="btn btn-success w-100">Guardar cambios</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Eliminar -->
  <div class="modal fade" id="eliminarModal" tabindex="-1" aria-labelledby="eliminarLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-danger text-white">
          <h5 class="modal-title" id="eliminarLabel">Eliminar Vaca</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p>¬øSeguro que deseas eliminar la vaca <strong id="nombreEliminar"></strong>?</p>
          <input type="hidden" id="delete-id">
          <button id="btnConfirmEliminar" class="btn btn-danger w-100">S√≠, eliminar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bot√≥n flotante -->
  <button id="btn-flotante" onclick="scrollToTabla()">üêÑ Tus vacas registradas</button>


  <!-- Modal Insumos -->
<div class="modal fade" id="insumosModal" tabindex="-1" aria-labelledby="insumosLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title" id="insumosLabel">Insumos Recomendados</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <h6 id="vacaSeleccionada" class="text-center mb-3"></h6>
        <div id="listaInsumos" class="d-flex flex-wrap justify-content-center gap-2"></div>
        <div id="resultadoInsumo" class="mt-4 text-center"></div>
      </div>
    </div>
  </div>
</div>

  <!-- Firebase y Script principal -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
    import {
      getFirestore, collection, query, where, getDocs,
      doc, deleteDoc, updateDoc
    } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAzonIFbhlOnnIs9xG9Lb4uBJHLrhCi3qU",
      authDomain: "web-y-movil-agroncontrol.firebaseapp.com",
      projectId: "web-y-movil-agroncontrol",
      storageBucket: "web-y-movil-agroncontrol.firebasestorage.app",
      messagingSenderId: "180502593551",
      appId: "1:180502593551:web:f4ae5111ac99ec70fa237a",
      measurementId: "G-BJ9G9WSKNY"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    let usuarioId = null;

    // üü¢ Crear tabla
    function crearTabla(vacas) {
      if (vacas.length === 0) return "<p class='text-center text-muted'>No hay vacas Jersey registradas.</p>";

      let filas = vacas.map(v => `
        <tr>
          <td>${v.data.name}</td>
          <td>${v.data.weight} kg</td>
          <td>${v.data.age} a√±os</td>
          <td>${v.data.milkProduction ?? "-"} L</td>
          <td>${v.data.isLactating ? "S√≠" : "No"}</td>
          <td class="text-center">
          <div class="d-flex flex-wrap justify-content-center gap-2 w-100 text-center">
            <button class="btn btn-warning btn-sm"
              data-bs-toggle="modal" data-bs-target="#editarModal"
              onclick="llenarFormulario('${v.id}','${v.data.name}','${v.data.weight}','${v.data.age}','${v.data.milkProduction ?? 0}','${v.data.isLactating}')">
              Editar
            </button>

            <button class="btn btn-danger btn-sm"
              data-bs-toggle="modal" data-bs-target="#eliminarModal"
              onclick="prepararEliminar('${v.id}','${v.data.name}')">
              Eliminar
            </button>

            <button class="btn btn-info btn-sm text-white" onclick="mostrarMedicamentos('${v.data.name}')">
              Medicamentos
            </button>

            <button class="btn btn-success btn-sm text-white" onclick="mostrarInsumos('${v.data.name}')">
              Insumos
            </button>
          </div>
        </td>
        </tr>
      `).join("");

      return `
        <table class="table table-striped table-hover shadow rounded">
          <thead class="table-verde">
            <tr>
              <th>Nombre</th>
              <th>Peso</th>
              <th>Edad</th>
              <th>Leche (L/d√≠a)</th>
              <th>Lactando</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>${filas}</tbody>
        </table>
      `;
    }

    // üü¢ Cargar vacas Jersey
    async function cargarVacas(userId) {
      const q = query(collection(db, "users", userId, "cows"), where("breed", "==", "Jersey"));
      const querySnap = await getDocs(q);
      const vacas = querySnap.docs.map(docSnap => ({ id: docSnap.id, data: docSnap.data() }));
      document.getElementById("tabla-jersey").innerHTML = crearTabla(vacas);
    }

    // üü¢ Pasar datos al modal de edici√≥n
    window.llenarFormulario = function(id, nombre, peso, edad, leche, lactando) {
      document.getElementById("edit-id").value = id;
      document.getElementById("edit-nombre").value = nombre;
      document.getElementById("edit-peso").value = peso;
      document.getElementById("edit-edad").value = edad;
      document.getElementById("edit-leche").value = leche;
      document.getElementById("edit-lactando").value = lactando;
    };

    // üü¢ Guardar cambios
    document.getElementById("formEditar").addEventListener("submit", async (e) => {
      e.preventDefault();
      const id = document.getElementById("edit-id").value;
      const nombre = document.getElementById("edit-nombre").value;
      const peso = parseFloat(document.getElementById("edit-peso").value);
      const edad = parseInt(document.getElementById("edit-edad").value);
      const leche = parseFloat(document.getElementById("edit-leche").value);
      const lactando = document.getElementById("edit-lactando").value === "true";

      await updateDoc(doc(db, "users", usuarioId, "cows", id), {
        name: nombre,
        weight: peso,
        age: edad,
        milkProduction: leche,
        isLactating: lactando
      });

      bootstrap.Modal.getInstance(document.getElementById("editarModal")).hide();
      cargarVacas(usuarioId);
    });

    // üü¢ Eliminar vaca
    window.prepararEliminar = function(id, nombre) {
      document.getElementById("delete-id").value = id;
      document.getElementById("nombreEliminar").innerText = nombre;
    };

    document.getElementById("btnConfirmEliminar").addEventListener("click", async () => {
      const id = document.getElementById("delete-id").value;
      await deleteDoc(doc(db, "users", usuarioId, "cows", id));
      bootstrap.Modal.getInstance(document.getElementById("eliminarModal")).hide();
      cargarVacas(usuarioId);
    });

    // üü¢ Detectar sesi√≥n
    onAuthStateChanged(auth, (user) => {
      if (user) {
        usuarioId = user.uid;
        cargarVacas(usuarioId);
      } else {
        document.getElementById("tabla-jersey").innerHTML = "<p class='text-danger text-center'>Debes iniciar sesi√≥n para ver tus vacas.</p>";
      }
    });

// üü¢ Mostrar insumos recomendados para una vaca
window.mostrarInsumos = async function (nombreVaca) {
  // Buscar los datos reales de la vaca seleccionada
  const q = query(collection(db, "users", usuarioId, "cows"), where("name", "==", nombreVaca));
  const snap = await getDocs(q);

  if (snap.empty) {
    alert("No se encontraron datos de la vaca.");
    return;
  }

  const vaca = snap.docs[0].data();
  const { weight, milkProduction } = vaca;

  document.getElementById("vacaSeleccionada").innerText =
    `üêÑ ${nombreVaca} ‚Äî Peso: ${weight} kg | Leche diaria: ${milkProduction} L`;

  // Mostrar modal
  const modal = new bootstrap.Modal(document.getElementById("insumosModal"));
  modal.show();

  // Obtener insumos desde el HTML de insumos generales
  const insumos = await obtenerInsumosDesdeHTML();
  const contenedor = document.getElementById("listaInsumos");
  contenedor.innerHTML = "";

  insumos.forEach(nombre => {
    const btn = document.createElement("button");
    btn.className = "btn btn-outline-success";
    btn.textContent = nombre;

    // Usar click en lugar de mouseover para que el usuario decida cu√°ndo calcular
    btn.addEventListener("click", () => {
      calcularRecomendacion(nombre, weight, milkProduction);
      //  resaltar el bot√≥n seleccionado
      contenedor.querySelectorAll("button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
    });

    contenedor.appendChild(btn);
  });
};

// üü¢ Leer los insumos autom√°ticamente del HTML de insumos generales
async function obtenerInsumosDesdeHTML() {
  try {
    const res = await fetch("insumos.html");
    const html = await res.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(html, "text/html");

    // Leer nombres de insumos (desde los t√≠tulos de las tarjetas)
    return Array.from(doc.querySelectorAll(".card-title")).map(e => e.textContent.trim());
  } catch (err) {
    console.error("Error leyendo insumos:", err);
    return [];
  }
}

// üü¢ Calcular recomendaci√≥n y mostrar resultado en el modal
function calcularRecomendacion(nombreInsumoOriginal, peso, leche) {
  const nombreInsumo = nombreInsumoOriginal.toLowerCase();
  let cantidad = 0;

  // ------------------------
  // 1. CONCENTRADOS ENERG√âTICOS
  // ------------------------
  if (nombreInsumo.includes("concentrado balanceado") || nombreInsumo.includes("concentrado")) {
    cantidad = leche * 0.4;
  } else if (nombreInsumo.includes("harina de ma√≠z") || nombreInsumo.includes("harina de maiz")) {
    cantidad = peso * 0.005;
  } else if (nombreInsumo.includes("ma√≠z triturado") || nombreInsumo.includes("maiz triturado")) {
    cantidad = peso * 0.006;
  } else if (nombreInsumo.includes("ma√≠z h√∫medo") || nombreInsumo.includes("maiz humedo") || nombreInsumo.includes("grano partido")) {
    cantidad = peso * 0.007;
  } else if (nombreInsumo.includes("harina de yuca")) {
    cantidad = peso * 0.004;
  }

  // ------------------------
  // 2. FORRAJES / HENOS / PASTOS
  // ------------------------
  else if (nombreInsumo.includes("forraje") || nombreInsumo.includes("pasto") || nombreInsumo.includes("verde")) {
    cantidad = peso * 0.05;
  } else if (nombreInsumo.includes("heno de alfalfa") || (nombreInsumo.includes("heno") && nombreInsumo.includes("alfalfa"))) {
    cantidad = peso * 0.02;
  } else if (nombreInsumo.includes("pasto de corte fresco")) {
    cantidad = peso * 0.06;
  } else if (nombreInsumo.includes("pellets de alfalfa")) {
    cantidad = peso * 0.015;
  } else if (nombreInsumo.includes("heno de pasto kikuyo")) {
    cantidad = peso * 0.02;
  }

  // ------------------------
  // 3. ENSILAJES 
  // ------------------------
  else if (nombreInsumo.includes("ensilaje de ma√≠z") || nombreInsumo.includes("ensilaje de maiz")) {
    cantidad = peso * 0.03;
  } else if (nombreInsumo.includes("ensilado") || nombreInsumo.includes("silo")) {
    cantidad = peso * 0.03;
  } else if (nombreInsumo.includes("ensilaje de sorgo dulce") || nombreInsumo.includes("sorgo")) {
    cantidad = peso * 0.025;
  }

  // ------------------------
  // 4. SUBPRODUCTOS
  // ------------------------
  else if (nombreInsumo.includes("afrecho") || nombreInsumo.includes("afrecho de trigo")) {
    cantidad = peso * 0.008;
  } else if (nombreInsumo.includes("salvado") || nombreInsumo.includes("salvado de arroz")) {
    cantidad = peso * 0.01;
  } else if (nombreInsumo.includes("torta de algod√≥n") || nombreInsumo.includes("torta de soya") || nombreInsumo.includes("torta") ) {
    cantidad = peso * 0.01;
  } else if (nombreInsumo.includes("torta de girasol")) {
    cantidad = peso * 0.009;
  } else if (nombreInsumo.includes("suero de leche")) {
    cantidad = leche * 1.0; 
  }

  // ------------------------
  // 5. SUPLEMENTOS PROT√âICOS
  // ------------------------
  else if (nombreInsumo.includes("suplemento proteico") || nombreInsumo.includes("proteico")) {
    cantidad = peso * 0.01;
  }

  // ------------------------
  // 6. AZ√öCARES / ACEITES
  // ------------------------
  else if (nombreInsumo.includes("melaza")) {
    cantidad = (leche / 10) * 0.8;
  } else if (nombreInsumo.includes("aceite de palma") || nombreInsumo.includes("aceite de girasol")) {
    cantidad = peso * 0.0015;
  } else if (nombreInsumo.includes("aceite de palma en bloque")) {
    cantidad = peso * 0.001;
  }

  // ------------------------
  // 7. MINERALES / VITAMINAS
  // ------------------------
  else if (nombreInsumo.includes("sales minerales") || nombreInsumo.includes("sales") || nombreInsumo.includes("sal mineral")) {
    cantidad = peso * 0.001;
  } else if (nombreInsumo.includes("bloque de sal") || nombreInsumo.includes("bloques de sal mineral")) {
    cantidad = peso * 0.0008;
  } else if (nombreInsumo.includes("suplemento vitam√≠nico") || nombreInsumo.includes("vitam√≠nico") || nombreInsumo.includes("vitaminico")) {
    cantidad = peso * 0.0005;
  } else if (nombreInsumo.includes("mineralizado con f√≥sforo") || nombreInsumo.includes("fosforo")) {
    cantidad = peso * 0.0006;
  } else if (nombreInsumo.includes("urea alimenticia") || nombreInsumo.includes("urea")) {
    cantidad = peso * 0.0003;
  } else if (nombreInsumo.includes("suplemento ca-p") || nombreInsumo.includes("2:1")) {
    cantidad = peso * 0.0007;
  }

  // ------------------------
  // 8. MICROADITIVOS
  // ------------------------
  else if (nombreInsumo.includes("levadura") || nombreInsumo.includes("levaduras")) {
    cantidad = peso * 0.0008;
  } else if (nombreInsumo.includes("premezcla probi√≥tica") || nombreInsumo.includes("probi√≥tica") || nombreInsumo.includes("premezcla")) {
    cantidad = peso * 0.0005;
  }

  // ------------------------
  // SI NO COINCIDE CON NINGUNO
  // ------------------------
  else {
    cantidad = peso * 0.01; // valor gen√©rico seguro
  }

  // construir resultado y mostrar en modal
  const resultadoHTML = `
    <div class="alert alert-success mt-3">
      <h6><strong>${nombreInsumoOriginal}</strong></h6>
      <p>
        Cantidad recomendada diaria: 
        <strong>${cantidad.toFixed(2)} kg</strong>
        <br><small>(seg√∫n peso ${peso} kg y ${leche} L leche/d√≠a)</small>
      </p>
    </div>
  `;

  document.getElementById("resultadoInsumo").innerHTML = resultadoHTML;
}

// limpiar resultado al cerrar el modal
document.getElementById("insumosModal").addEventListener("hidden.bs.modal", () => {
  document.getElementById("resultadoInsumo").innerHTML = "";
});


  </script>

  <script>
  const btnFlotante = document.getElementById("btn-flotante");
  const seccionVacas = document.getElementById("tabla-jersey"); // Cambia el ID si tu tabla se llama distinto

  function scrollToTabla() {
    if (seccionVacas) {
      seccionVacas.scrollIntoView({ behavior: "smooth" });
    }
  }

  window.addEventListener("scroll", () => {
  if (!seccionVacas) return;

  const rect = seccionVacas.getBoundingClientRect();
  const alturaVentana = window.innerHeight;

  // Si la parte superior de la tabla est√° dentro del √°rea visible, ocultar el bot√≥n
  if (rect.top < alturaVentana && rect.bottom > 0) {
    btnFlotante.classList.add("oculto");
  } else {
    btnFlotante.classList.remove("oculto");
  }
  });
</script>




</body>
</html>